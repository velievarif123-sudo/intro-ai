# Flask LLM Chat 

## Описание

Flask LLM Chat — это простое веб-приложение на Flask для общения с языковой моделью (LLM). Приложение сохраняет историю чата и использует YandexGPT API.

---

## 1. Требования

Перед началом убедитесь, что у вас установлены:

- Python 3.8 или выше: [скачать Python](https://www.python.org/downloads/)
- Расширение Python в VsCode 
- Git (для клонирования репозитория): [скачать Git](https://git-scm.com/downloads)
- Аккаунт Яндекс cloud для работы с API

---

## 2. Клонирование репозитория

Откройте терминал или командную строку и выполните:

```bash
git clone https://github.com/labintsev/flask-llm.git
cd flask-llm
```

---

## 3. Создание виртуального окружения

Чтобы не "засорять" вашу систему, создайте виртуальное окружение:

```bash
python -m venv venv
```

- На **Windows**:  
  ```bash
  venv\Scripts\activate
  ```
- На **macOS или Linux**:  
  ```bash
  source venv/bin/activate
  ```

**Примечание**: В VSCode можно создать и активировать виртуальное окружение через меню справа внизу или через командную палитру (Ctrl+Shift+P → Python: Create Environment).


!!! Если у вас ошибка с отключенным выполнением сценариев в Windows, необходимо выполнить следующее:  

Открыть Терминал на ПК от Администратора (Windows PowerShell)  
на Windows - это правой кн. мыши на кнопке "Пуск" и выбрать "Терминал (Администратор)  

Далее пишем в командной строке:  
Set-ExecutionPolicy RemoteSigned  
На вопрос отвечаем: A (На английской раскладке)  

---

## 4. Установка зависимостей

В активированном виртуальном окружении выполните:

```bash
pip install -r requirements.txt
```

---

## 5. Получение ключа API

Для работы с Яндекс LLM нужен API-ключ:

1. Перейдите по [инструкции Яндекса](https://yandex.cloud/ru/docs/foundation-models/operations/get-api-key).
2. Скопируйте полученный ключ.
3. Создайте файл `.env` в корневой папке проекта.
4. Добавьте туда строку:

```
YA_API_KEY=ваш_ключ
YA_FOLDER_ID=идентификатор_каталога
```

---

## 6. Запуск приложения

Всё готово! Запустите приложение:

```bash
python app.py
```

---

## 7. Откройте веб-интерфейс

В браузере перейдите по адресу: [http://127.0.0.1:5000/](http://127.0.0.1:5000/)

---

## 8. Использование

- Введите текст в поле чата и отправьте.
- Ответ от LLM появится ниже.
- История сообщений сохраняется — при обновлении страницы вы увидите весь чат.

---

## 9. Структура проекта

- `app.py` — основной файл Flask-приложения
- `models.py` — работа с базой данных и сервисом LLM
- `templates/` — HTML-шаблоны (например, `index.html`)
- `static/` — статические файлы (CSS, JS, изображения)
- `requirements.txt` — список необходимых библиотек

---

## 10. Частые проблемы и решения

**1. Не установлен Python**  
→ Проверьте команду `python --version`. Если не установлен, скачайте с [официального сайта](https://www.python.org/downloads/).

**2. Не работает pip**  
→ Проверьте команду `pip --version`. Если не установлен, [инструкция по установке pip](https://pip.pypa.io/en/stable/installation/).

**3. Ошибка при запуске app.py**  
→ Убедитесь, что виртуальное окружение активировано и все зависимости установлены.

**4. Нет файла .env или переменной YA_API_KEY**  
→ Проверьте, что в `.env` корректно прописан ключ:  
`YA_API_KEY=ваш_ключ`

**5. Не открывается страница**  
→ Убедитесь, что приложение запущено, и используйте адрес [http://127.0.0.1:5000/](http://127.0.0.1:5000/).

---

## 11. Дополнительные советы

- Для остановки приложения нажмите `Ctrl+C` в терминале.
- Для автоматической перезагрузки при изменениях используйте `app.run(debug=True)` — это уже включено в `app.py`.
- Если хотите изменить системный промпт (роль ассистента), измените содержимое файла `prompts/prompt_1.txt` или в файле `models.py` измените путь к новому файлу:
```python
llm_1 = LLMService('prompts/prompt_2.txt')
```

---

## 12. Лицензия

Проект распространяется под MIT лицензией.

---

**Если что-то не получилось — пишите в ТГ-чат!**
